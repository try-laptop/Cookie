{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,OAAO,mKAAA,CAAA,OAAkB;AAE/B,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mKAAA,CAAA,OAAkB;QACjB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8FACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG,mKAAA,CAAA,OAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,uYACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,mKAAA,CAAA,UAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,mIACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,mKAAA,CAAA,UAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport { addFileToStore, deleteFileFromStore, getLatestFileMetadataFromStore, type StoredFile } from '@/lib/file-store';\nimport { revalidatePath } from 'next/cache';\n\nconst MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB\nconst ACCEPTED_FILE_EXTENSIONS = ['.json']; // Changed from .txt to .json\n\nconst UploadResponseSchema = z.object({\n  success: z.boolean(),\n  fileId: z.string().optional(),\n  fileName: z.string().optional(),\n  error: z.string().optional(),\n});\nexport type UploadResponse = z.infer<typeof UploadResponseSchema>;\n\nexport async function uploadFile(\n  prevState: UploadResponse,\n  formData: FormData\n): Promise<UploadResponse> {\n  const file = formData.get('file') as File | null;\n\n  if (!file) {\n    return { success: false, error: 'No file selected. Please choose a .json file.' };\n  }\n\n  if (file.size === 0) {\n    return { success: false, error: 'The selected file is empty.' };\n  }\n\n  if (file.size > MAX_FILE_SIZE) {\n    return { success: false, error: `File size exceeds ${MAX_FILE_SIZE / (1024 * 1024)}MB limit.` };\n  }\n\n  const fileExtension = '.' + file.name.split('.').pop()?.toLowerCase();\n  if (!fileExtension || !ACCEPTED_FILE_EXTENSIONS.includes(fileExtension)) {\n    return { success: false, error: 'Invalid file type. Only .json files are allowed.' };\n  }\n\n  try {\n    const content = await file.text(); // JSON content will be a string\n    const mimeType = 'application/json'; // Changed from text/plain\n    \n    const storedFile = addFileToStore({\n      fileName: file.name,\n      content: content,\n      mimeType: mimeType,\n      size: file.size,\n    });\n    \n    revalidatePath('/'); // Revalidate home page to update receiver tab\n    revalidatePath(`/download/${storedFile.id}`);\n    return { success: true, fileId: storedFile.id, fileName: storedFile.fileName };\n  } catch (e) {\n    console.error('File upload processing error:', e);\n    return { success: false, error: 'An unexpected error occurred while processing the file.' };\n  }\n}\n\nconst DeleteResponseSchema = z.object({\n  success: z.boolean(),\n  message: z.string().optional(),\n  error: z.string().optional(),\n});\nexport type DeleteResponse = z.infer<typeof DeleteResponseSchema>;\n\nexport async function deleteFileAction(\n  prevState: DeleteResponse,\n  formData: FormData\n): Promise<DeleteResponse> {\n  const fileId = formData.get('fileId') as string | null;\n\n  if (!fileId) {\n    return { success: false, error: 'File ID is missing.' };\n  }\n\n  try {\n    const deleted = deleteFileFromStore(fileId);\n    if (deleted) {\n      revalidatePath('/'); // Revalidate home page\n      revalidatePath(`/download/${fileId}`); // Revalidate download page if it exists\n      return { success: true, message: 'Session file deleted successfully.' };\n    } else {\n      return { success: false, error: 'Session file not found or already deleted.' };\n    }\n  } catch (e) {\n    console.error('File deletion error:', e);\n    return { success: false, error: 'An unexpected error occurred while deleting the session file.' };\n  }\n}\n\nconst FileMetadataResponseSchema = z.object({\n    file: z.custom<Omit<StoredFile, 'content'>>().nullable(),\n    error: z.string().optional(),\n});\nexport type FileMetadataResponse = z.infer<typeof FileMetadataResponseSchema>;\n\nexport async function getLatestSharedFileMetadataAction(): Promise<FileMetadataResponse> {\n  try {\n    const fileMetadata = getLatestFileMetadataFromStore();\n    return { file: fileMetadata || null };\n  } catch (e) {\n    console.error('Error fetching latest file metadata:', e);\n    return { file: null, error: 'Failed to fetch latest session file information.' };\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAiBsB;IAkDA;IA+BA","debugId":null}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,mKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,6LAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 269, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 372, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,oKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 411, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/upload-client-page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef, useTransition } from 'react';\nimport { useActionState } from 'react';\nimport { uploadFile, type UploadResponse, deleteFileAction, type DeleteResponse } from '@/app/actions';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Label } from '@/components/ui/label';\nimport { UploadCloud, AlertCircle, CheckCircle, Copy, ExternalLink, Trash2, RotateCcw, FileJson } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport Link from 'next/link';\n\nconst initialUploadState: UploadResponse = { success: false };\nconst initialDeleteState: DeleteResponse = { success: false };\n\ninterface UploadClientPageProps {\n  onUploadSuccess?: (fileId: string, fileName: string) => void;\n  onDeleteSuccess?: () => void;\n  latestFileId?: string | null;\n  latestFileName?: string | null;\n}\n\nexport default function UploadClientPage({ \n  onUploadSuccess, \n  onDeleteSuccess,\n  latestFileId: initialLatestFileId, \n  latestFileName: initialLatestFileName \n}: UploadClientPageProps) {\n  const [uploadFormState, uploadFormAction, isUploadPending] = useActionState(uploadFile, initialUploadState);\n  const [deleteFormState, deleteFormAction, isDeletePending] = useActionState(deleteFileAction, initialDeleteState);\n  \n  const [selectedFileName, setSelectedFileName] = useState<string | null>(null);\n  const [currentFileId, setCurrentFileId] = useState<string | null>(initialLatestFileId || null);\n  const [currentFileName, setCurrentFileName] = useState<string | null>(initialLatestFileName || null);\n  const [isTransitionPending, startTransition] = useTransition();\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (uploadFormState.error) {\n      // Error is handled by the Alert component below\n    } else if (uploadFormState.success && uploadFormState.fileId && uploadFormState.fileName) {\n      toast({\n        title: 'Upload Successful!',\n        description: `${uploadFormState.fileName} has been shared.`,\n        variant: 'default',\n      });\n      setCurrentFileId(uploadFormState.fileId);\n      setCurrentFileName(uploadFormState.fileName);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n      setSelectedFileName(null);\n      if (onUploadSuccess) {\n        onUploadSuccess(uploadFormState.fileId, uploadFormState.fileName);\n      }\n    }\n  }, [uploadFormState, toast, onUploadSuccess]);\n\n  useEffect(() => {\n    if (deleteFormState.error) {\n      toast({\n        title: 'Delete Failed',\n        description: deleteFormState.error,\n        variant: 'destructive',\n      });\n    } else if (deleteFormState.success) {\n      toast({\n        title: 'Session File Deleted',\n        description: deleteFormState.message,\n        variant: 'default',\n      });\n      setCurrentFileId(null);\n      setCurrentFileName(null);\n      if (onDeleteSuccess) {\n        onDeleteSuccess();\n      }\n    }\n  }, [deleteFormState, toast, onDeleteSuccess]);\n  \n  useEffect(() => {\n    setCurrentFileId(initialLatestFileId || null);\n    setCurrentFileName(initialLatestFileName || null);\n  }, [initialLatestFileId, initialLatestFileName]);\n\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setSelectedFileName(file.name);\n    } else {\n      setSelectedFileName(null);\n    }\n  };\n\n  const handleFormSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const formData = new FormData(event.currentTarget);\n    startTransition(() => {\n        uploadFormAction(formData);\n    });\n  };\n  \n  const handleDeleteSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const formData = new FormData(event.currentTarget);\n    startTransition(() => {\n        deleteFormAction(formData);\n    });\n  };\n\n\n  const isActionPending = isUploadPending || isDeletePending || isTransitionPending;\n\n  const handleResetForm = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n    setSelectedFileName(null);\n    // Visually, this is enough. The form state will be overridden on next submit.\n    toast({ title: 'Form Cleared', description: 'You can now select a new .json file.'});\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {!currentFileId && (\n        <form onSubmit={handleFormSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"file-upload\" className=\"text-sm font-medium\">\n              Choose a .json session file to share\n            </Label>\n            <div className=\"flex items-center gap-2 mt-1\">\n              <Input\n                id=\"file-upload\"\n                name=\"file\"\n                type=\"file\"\n                accept=\".json\" // Changed from .txt\n                required\n                onChange={handleFileChange}\n                ref={fileInputRef}\n                className=\"flex-grow\"\n                disabled={isActionPending}\n              />\n               {selectedFileName && (\n                <Button type=\"button\" variant=\"ghost\" size=\"icon\" onClick={handleResetForm} disabled={isActionPending} aria-label=\"Clear selection\">\n                  <RotateCcw className=\"h-4 w-4\" />\n                </Button>\n              )}\n            </div>\n            {selectedFileName && !isActionPending && (\n              <p className=\"mt-2 text-sm text-muted-foreground\">Selected: {selectedFileName}</p>\n            )}\n          </div>\n          <Button type=\"submit\" className=\"w-full bg-accent hover:bg-accent/90 text-accent-foreground\" disabled={isActionPending || !selectedFileName}>\n            <UploadCloud className=\"mr-2 h-4 w-4\" />\n            {isUploadPending || isTransitionPending && !isDeletePending ? 'Sharing...' : 'Share Session File'}\n          </Button>\n        </form>\n      )}\n\n      {uploadFormState.error && !isActionPending && !currentFileId && (\n        <Alert variant=\"destructive\" className=\"mt-4\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertTitle>Upload Failed</AlertTitle>\n          <AlertDescription>{uploadFormState.error}</AlertDescription>\n        </Alert>\n      )}\n\n      {currentFileId && currentFileName && (\n        <Card className=\"mt-6 bg-secondary/50\">\n          <CardContent className=\"pt-6 space-y-3\">\n            <div className=\"flex items-center text-green-600\">\n              <FileJson className=\"h-5 w-5 mr-2\" />\n              <p className=\"font-semibold\">Session file shared: <span className=\"font-bold\">{currentFileName}</span></p>\n            </div>\n            \n            <div>\n              <Label htmlFor=\"share-link\" className=\"text-xs font-medium\">Shareable Download Link</Label>\n              <div className=\"flex items-center space-x-2 mt-1\">\n                <Input\n                  id=\"share-link\"\n                  type=\"text\"\n                  readOnly\n                  value={`${window.location.origin}/download/${currentFileId}`}\n                  className=\"bg-background\"\n                />\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  onClick={() => copyToClipboard(`${window.location.origin}/download/${currentFileId}`, toast)}\n                  aria-label=\"Copy link\"\n                  disabled={isActionPending}\n                >\n                  <Copy className=\"h-4 w-4\" />\n                </Button>\n                 <Button variant=\"outline\" size=\"icon\" asChild aria-label=\"Open link\" disabled={isActionPending}>\n                  <Link href={`/download/${currentFileId}`} target=\"_blank\">\n                    <ExternalLink className=\"h-4 w-4\" />\n                  </Link>\n                </Button>\n              </div>\n            </div>\n             <form onSubmit={handleDeleteSubmit} className=\"pt-2\">\n                <input type=\"hidden\" name=\"fileId\" value={currentFileId} />\n                <Button type=\"submit\" variant=\"destructive\" className=\"w-full\" disabled={isActionPending}>\n                  <Trash2 className=\"mr-2 h-4 w-4\" />\n                  {isDeletePending || (isTransitionPending && !isUploadPending) ? 'Deleting...' : 'Delete This Session File'}\n                </Button>\n              </form>\n              {deleteFormState.error && !isActionPending && ( // Show only if not pending and error exists\n                 <Alert variant=\"destructive\" className=\"mt-2\">\n                    <AlertCircle className=\"h-4 w-4\" />\n                    <AlertTitle>Delete Failed</AlertTitle>\n                    <AlertDescription>{deleteFormState.error}</AlertDescription>\n                  </Alert>\n              )}\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n\nfunction copyToClipboard(text: string, toast: (options: any) => void) {\n  navigator.clipboard.writeText(text).then(() => {\n    toast({ title: 'Link Copied!', description: 'Shareable link copied to clipboard.' });\n  }).catch(err => {\n    toast({ title: 'Copy Failed', description: 'Could not copy link to clipboard.', variant: 'destructive' });\n    console.error('Failed to copy text: ', err);\n  });\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 934, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf;KAVS","debugId":null}},
    {"offset": {"line": 964, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/receiver-tab-content.tsx"],"sourcesContent":["'use client';\n\nimport type { StoredFile } from '@/lib/file-store';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Download, FileJson, Info, RefreshCw } from 'lucide-react'; // Changed FileText to FileJson\nimport Link from 'next/link';\nimport { format } from 'date-fns';\nimport { useEffect, useState, useTransition } from 'react';\nimport { getLatestSharedFileMetadataAction, type FileMetadataResponse } from '@/app/actions';\nimport { Skeleton } from './ui/skeleton';\nimport { ClientDateTime } from './client-datetime';\n\ninterface ReceiverTabContentProps {\n  initialFileMetadata: Omit<StoredFile, 'content'> | null;\n}\n\nexport default function ReceiverTabContent({ initialFileMetadata }: ReceiverTabContentProps) {\n  const [fileMetadata, setFileMetadata] = useState<Omit<StoredFile, 'content'> | null>(initialFileMetadata);\n  const [isPending, startTransition] = useTransition();\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchLatestFile = () => {\n    startTransition(async () => {\n      setError(null);\n      const response = await getLatestSharedFileMetadataAction();\n      if (response.error) {\n        setError(response.error);\n        setFileMetadata(null);\n      } else {\n        setFileMetadata(response.file);\n      }\n    });\n  };\n\n  useEffect(() => {\n    setFileMetadata(initialFileMetadata);\n  }, [initialFileMetadata]);\n\n\n  if (isPending && !fileMetadata) {\n    return (\n      <Card className=\"shadow-lg\">\n        <CardHeader>\n          <Skeleton className=\"h-8 w-3/4 mx-auto\" />\n          <Skeleton className=\"h-4 w-1/2 mx-auto mt-2\" />\n        </CardHeader>\n        <CardContent className=\"p-6 space-y-3\">\n          <Skeleton className=\"h-4 w-full\" />\n          <Skeleton className=\"h-4 w-full\" />\n          <Skeleton className=\"h-10 w-full mt-2\" />\n        </CardContent>\n        <CardFooter className=\"flex justify-end p-4\">\n          <Skeleton className=\"h-8 w-24\" />\n        </CardFooter>\n      </Card>\n    );\n  }\n  \n  if (error) {\n    return (\n      <Card className=\"shadow-lg text-center\">\n        <CardHeader>\n          <div className=\"flex justify-center text-destructive mb-3\">\n            <Info className=\"h-12 w-12\" />\n          </div>\n          <CardTitle className=\"text-2xl\">Error</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-muted-foreground\">{error}</p>\n        </CardContent>\n        <CardFooter className=\"flex justify-center\">\n            <Button onClick={fetchLatestFile} variant=\"outline\" disabled={isPending}>\n                <RefreshCw className={`mr-2 h-4 w-4 ${isPending ? 'animate-spin' : ''}`} /> Try Again\n            </Button>\n        </CardFooter>\n      </Card>\n    );\n  }\n\n  if (!fileMetadata) {\n    return (\n      <Card className=\"shadow-lg text-center\">\n        <CardHeader>\n          <div className=\"flex justify-center text-primary mb-3\">\n            <Info className=\"h-12 w-12\" />\n          </div>\n          <CardTitle className=\"text-2xl\">No Session File Shared</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-muted-foreground\">\n            The sender has not shared any session file yet, or the previously shared file has been removed.\n          </p>\n        </CardContent>\n         <CardFooter className=\"flex justify-center\">\n            <Button onClick={fetchLatestFile} variant=\"outline\" disabled={isPending}>\n                <RefreshCw className={`mr-2 h-4 w-4 ${isPending ? 'animate-spin' : ''}`} /> Check for New Session File\n            </Button>\n        </CardFooter>\n      </Card>\n    );\n  }\n\n  const fileSizeKB = (fileMetadata.size / 1024).toFixed(2);\n\n  return (\n    <div className=\"w-full\">\n      <Card className=\"shadow-xl\">\n        <CardHeader className=\"text-center bg-secondary/30 rounded-t-lg py-8\">\n          <div className=\"flex justify-center items-center mb-4 text-primary\">\n            <FileJson className=\"h-12 w-12\" /> {/* Changed Icon */}\n          </div>\n          <CardTitle className=\"text-2xl font-semibold\">{fileMetadata.fileName}</CardTitle>\n          <CardDescription className=\"text-sm text-muted-foreground\">\n            A session file has been shared with you.\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"p-6 space-y-4\">\n          <div className=\"text-sm space-y-1\">\n            <p><strong>Session File:</strong> {fileMetadata.fileName}</p>\n            <p><strong>Size:</strong> {fileSizeKB} KB</p>\n            <p><strong>Shared:</strong> <ClientDateTime date={fileMetadata.uploadedAt} /></p>\n          </div>\n          <Button asChild className=\"w-full bg-accent hover:bg-accent/90 text-accent-foreground\">\n            <a href={`/api/download/${fileMetadata.id}`} download={fileMetadata.fileName}>\n              <Download className=\"mr-2 h-4 w-4\" />\n              Download Session File\n            </a>\n          </Button>\n        </CardContent>\n        <CardFooter className=\"flex justify-end p-4 pt-0\">\n             <Button onClick={fetchLatestFile} variant=\"outline\" size=\"sm\" disabled={isPending}>\n                <RefreshCw className={`mr-2 h-4 w-4 ${isPending ? 'animate-spin' : ''}`} /> Refresh\n            </Button>\n        </CardFooter>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1461, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/home-tabs.tsx"],"sourcesContent":["'use client';\n\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport UploadClientPage from '@/components/upload-client-page';\nimport ReceiverTabContent from '@/components/receiver-tab-content';\nimport type { StoredFile } from '@/lib/file-store';\nimport { useState, useEffect } from 'react';\n\ninterface HomeTabsProps {\n  initialLatestFile: Omit<StoredFile, 'content'> | null;\n}\n\nexport default function HomeTabs({ initialLatestFile }: HomeTabsProps) {\n  const [latestFile, setLatestFile] = useState<Omit<StoredFile, 'content'> | null>(initialLatestFile);\n  \n  const defaultTabValue = initialLatestFile ? \"receiver\" : \"sender\";\n  const [activeTab, setActiveTab] = useState<string>(defaultTabValue);\n\n  useEffect(() => {\n    setLatestFile(initialLatestFile);\n    // Keep current tab if user selected it, otherwise default based on file presence\n    if (!initialLatestFile && activeTab === \"receiver\") {\n      setActiveTab(\"sender\");\n    } else if (initialLatestFile && activeTab === \"sender\" && !latestFile) {\n       // If a file was just uploaded (latestFile is null before this update)\n       // and user was on sender tab, stay on sender.\n       // If a file becomes available and user was on sender, but it's not from *this* user's immediate action,\n       // then switch to receiver might be an option, but current logic is simpler.\n       // Sticking to: if a file exists, default to receiver, else sender.\n       // User can override by clicking tabs.\n       setActiveTab(\"receiver\");\n    } else {\n       setActiveTab(initialLatestFile ? \"receiver\" : \"sender\");\n    }\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [initialLatestFile]);\n\n\n  const handleUploadSuccess = (fileId: string, fileName: string) => {\n    setLatestFile({ \n        id: fileId, \n        fileName: fileName, \n        mimeType: 'application/json', // Reflecting JSON file type\n        size: 0, // Placeholder, actual size known by uploader\n        uploadedAt: new Date() \n    });\n    // setActiveTab(\"sender\"); // Stay on sender tab as per original logic\n    // After upload, the sender might want to see the link or delete option, so sender tab is fine.\n    // Or, if we want to immediately show the receiver perspective:\n    setActiveTab(\"receiver\"); \n  };\n\n  const handleDeleteSuccess = () => {\n    setLatestFile(null);\n    setActiveTab(\"sender\"); \n  };\n\n  return (\n    <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n      <TabsList className=\"grid w-full grid-cols-2 mb-6\">\n        <TabsTrigger value=\"sender\">Share Session</TabsTrigger>\n        <TabsTrigger value=\"receiver\">Get Session</TabsTrigger>\n      </TabsList>\n      <TabsContent value=\"sender\">\n        <UploadClientPage \n          onUploadSuccess={handleUploadSuccess} \n          onDeleteSuccess={handleDeleteSuccess}\n          latestFileId={latestFile?.id}\n          latestFileName={latestFile?.fileName}\n        />\n      </TabsContent>\n      <TabsContent value=\"receiver\">\n        <ReceiverTabContent initialFileMetadata={latestFile} />\n      </TabsContent>\n    </Tabs>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;;;AANA;;;;;AAYe,SAAS,SAAS,EAAE,iBAAiB,EAAiB;;IACnE,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAsC;IAEjF,MAAM,kBAAkB,oBAAoB,aAAa;IACzD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IAEnD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;8BAAE;YACR,cAAc;YACd,iFAAiF;YACjF,IAAI,CAAC,qBAAqB,cAAc,YAAY;gBAClD,aAAa;YACf,OAAO,IAAI,qBAAqB,cAAc,YAAY,CAAC,YAAY;gBACpE,sEAAsE;gBACtE,8CAA8C;gBAC9C,wGAAwG;gBACxG,4EAA4E;gBAC5E,mEAAmE;gBACnE,sCAAsC;gBACtC,aAAa;YAChB,OAAO;gBACJ,aAAa,oBAAoB,aAAa;YACjD;QAEF,uDAAuD;QACvD;6BAAG;QAAC;KAAkB;IAGtB,MAAM,sBAAsB,CAAC,QAAgB;QAC3C,cAAc;YACV,IAAI;YACJ,UAAU;YACV,UAAU;YACV,MAAM;YACN,YAAY,IAAI;QACpB;QACA,sEAAsE;QACtE,+FAA+F;QAC/F,+DAA+D;QAC/D,aAAa;IACf;IAEA,MAAM,sBAAsB;QAC1B,cAAc;QACd,aAAa;IACf;IAEA,qBACE,6LAAC,mIAAA,CAAA,OAAI;QAAC,OAAO;QAAW,eAAe;QAAc,WAAU;;0BAC7D,6LAAC,mIAAA,CAAA,WAAQ;gBAAC,WAAU;;kCAClB,6LAAC,mIAAA,CAAA,cAAW;wBAAC,OAAM;kCAAS;;;;;;kCAC5B,6LAAC,mIAAA,CAAA,cAAW;wBAAC,OAAM;kCAAW;;;;;;;;;;;;0BAEhC,6LAAC,mIAAA,CAAA,cAAW;gBAAC,OAAM;0BACjB,cAAA,6LAAC,iJAAA,CAAA,UAAgB;oBACf,iBAAiB;oBACjB,iBAAiB;oBACjB,cAAc,YAAY;oBAC1B,gBAAgB,YAAY;;;;;;;;;;;0BAGhC,6LAAC,mIAAA,CAAA,cAAW;gBAAC,OAAM;0BACjB,cAAA,6LAAC,mJAAA,CAAA,UAAkB;oBAAC,qBAAqB;;;;;;;;;;;;;;;;;AAIjD;GAjEwB;KAAA","debugId":null}}]
}